Розглянемо завдання, що часто зустрічається, завантаження даних, обробки
індикатора завантаження та помилки виконання запиту.

Оголосимо слайс списку завдань, у стані якого будемо зберігати масив завдань,
прапор статусу завантаження та дані можливої помилки. Додамо редюсер для обробки
кожного з можливих станів запиту.

Для того, щоб при відправленні екшену виконати асинхронний код, необхідно
оголосити «операцію» - асинхронний генератор екшену, в тілі якого викликаються
інші, синхронні генератори екшенів. Операція не повертає екшен замість цього
вона повертає іншу функцію, яка аргументом набуває вже знайомий нам dispatch. У
тілі цієї функції можна виконувати асинхронні дії, наприклад, HTTP-запит.

Тепер усередині операції надсилаємо синхронні екшени для обробки трьох ситуацій:
встановлення індикатора завантаження, отримання даних при успішному запиті та
обробка помилки.

Далі додамо у апп мінімальний код виклику асинхронного генератора екшену в
компоненті, рендер індикатора завантаження, даних та обробку помилки. імпорт
диспатч , Отримуємо частини стану, // Викликаємо операцію, // Рендерим розмітку
в залежності від значень у стані

Redux Toolkit спрощує процес оголошення асинхронного генератора екшену за
допомогою функції createAsyncThunk(). Першим аргументом вона приймає тип екшену,
а другим функцію, яка повинна виконати HTTP-запит і повернути проміс із даними,
які стануть значенням payload. Вона повертає асинхронний генератор екшену
(операцію) при запуску якого виконається функція з кодом запиту.

```js
src / redux / operations.js;
import axios from 'axios';
import { createAsyncThunk } from '@reduxjs/toolkit';
axios.defaults.baseURL = 'https://62584f320c918296a49543e7.mockapi.io';
export const fetchTasks = createAsyncThunk('tasks/fetchAll', async () => {
  const response = await axios.get('/tasks');
  return response.data;
});
```

Функція createAsyncThunk не створює редюсер, тому що не може знати, як ми хочемо
відстежувати стан завантаження, з якими даними завершиться запит та як їх
правильно обробити. Тому наступним кроком буде зміна коду слайсу tasksSlice так,
щоб він обробляв нові екшени.

ЕКШЕНИ ОПЕРАЦІЇ Генератори екшенів, які мають життєвий цикл запиту, зберігаються
в об'єкті операції як властивості pending, fulfilled та rejected. Вони
автоматично створюються за допомогою createAction і тому мають властивість type
і перевизначений метод toString(), який повертає рядок типу екшену.

Властивість reducers нам більше не потрібна, тому всю логіку обробки екшенів
запиту переносимо до нових редюсерів.

Залишилося додати обробку запиту, що завершився з помилкою. Для цього необхідно
доповнити код створення операції fetchTasks у оперейшнз так, щоб у випадку
помилки запиту повертався проміс, який буде відхилено. Тоді на екшені помилки
запиту з'явиться властивість payload.

Колбек функція, в якій виконується запит, називається payloadCreator і
відповідає за складання значення властивості payload. Вона буде викликана з
двома аргументами: arg та thunkAPI.

payloadCreator(arg, thunkAPI)

arg - значення, яке було передано операції під час виклику. Використовується,
наприклад, для передачі ідентифікаторів об'єктів при видаленні, тексту нотаток
при створенні, тощо. thunkAPI - об'єкт, який передається в асинхронний генератор
екшену в redux-thunk. Містить властивості та методи доступу до стору, відправки
екшенів, а також деякі додаткові.
